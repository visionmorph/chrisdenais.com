---
const {
  href,
  label,
  subtitle,
  description,
  thumbnail: { src, size, video }
} = Astro.props

// Determine if we should render a video
const isVideo = video || (src && src.endsWith('.mp4'))
const videoSrc = video || (isVideo ? src : null)
const imgSrc = !isVideo ? src : null
---
<section>
    <div class='container'>
        <h1>Next up</h1>
        <a href={href} class='next__grid'>
            <div class='next__caption'>
              <h2>{label}<span class='text-secondary'>{description}</span></h2>
              <p>-></p>
            </div>
            <div class='media-overlay'>
              {isVideo ? (
              <video 
                  autoplay 
                  loop 
                  muted 
                  playsinline 
                  class="full"
              >
                  <source src={videoSrc} type="video/mp4" />
                  Your browser does not support the video tag.
              </video>
              ) : (
              <img src={imgSrc}/>
              )}
            </div>
        </a>
    </div>
</section>
